(self.webpackChunkgin_admin_frontend=self.webpackChunkgin_admin_frontend||[]).push([[905],{24930:function(N,S,e){"use strict";var i=e(20034),d=e(16045),l=e(37969),u=e(59496),c=e(74369),b=["fieldProps","min","proFieldProps","max"],O=function(P,E){var g=P.fieldProps,f=P.min,W=P.proFieldProps,_=P.max,a=(0,l.Z)(P,b);return u.createElement(c.Z,(0,i.Z)({mode:"edit",valueType:"digit",fieldProps:(0,d.Z)({min:f,max:_},g),ref:E,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:W},a))};S.Z=u.forwardRef(O)},31184:function(N,S,e){"use strict";var i=e(20034),d=e(16045),l=e(37969),u=e(59496),c=e(74369),b=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],O=u.forwardRef(function(m,P){var E=m.fieldProps,g=m.unCheckedChildren,f=m.checkedChildren,W=m.proFieldProps,_=(0,l.Z)(m,b);return u.createElement(c.Z,(0,i.Z)({valueType:"switch",mode:"edit",fieldProps:(0,d.Z)({unCheckedChildren:g,checkedChildren:f},E),ref:P,valuePropName:"checked",proFieldProps:W,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},_))});S.Z=O},46324:function(N,S,e){"use strict";var i=e(20034),d=e(37969),l=e(59496),u=e(74369),c=["fieldProps","proFieldProps"],b=["fieldProps","proFieldProps"],O="text",m=function(f){var W=f.fieldProps,_=f.proFieldProps,a=(0,d.Z)(f,c);return l.createElement(u.Z,(0,i.Z)({mode:"edit",valueType:O,fieldProps:W,filedConfig:{valueType:O},proFieldProps:_},a))},P=function(f){var W=f.fieldProps,_=f.proFieldProps,a=(0,d.Z)(f,b);return l.createElement(u.Z,(0,i.Z)({mode:"edit",valueType:"password",fieldProps:W,proFieldProps:_,filedConfig:{valueType:O}},a))},E=m;E.Password=P,E.displayName="ProFormComponent",S.Z=E},94811:function(N,S,e){"use strict";var i=e(20034),d=e(37969),l=e(59496),u=e(74369),c=["fieldProps","proFieldProps"],b=function(m,P){var E=m.fieldProps,g=m.proFieldProps,f=(0,d.Z)(m,c);return l.createElement(u.Z,(0,i.Z)({ref:P,mode:"edit",valueType:"textarea",fieldProps:E,proFieldProps:g},f))};S.Z=l.forwardRef(b)},3049:function(N,S,e){"use strict";e.d(S,{HS:function(){return Q},IG:function(){return J},hC:function(){return Z},g2:function(){return X}});var i=e(47521),d=e(24029),l=e(10407),u=e(56188),c=e(20686),b=e(23258),O=e(78419),m=e(59496),P=e(16045),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},g=E,f=e(65858),W=function(n,v){return m.createElement(f.Z,(0,P.Z)((0,P.Z)({},n),{},{ref:v,icon:g}))},_=m.forwardRef(W),a=_,s=e(28470),p=e(77075),I=e(48177),t=e(82305),D=e(85851),V=e(18641),M=e(4637),Q=function(n){var v=(0,D.tT)("@@initialState"),j=v.initialState,F=(0,D.YB)(),C=(0,V.$B)(),r=j.routePathCodeMap[C.path],o=j.flatMenus.hasOwnProperty("".concat(r,".").concat(n.code));return(0,M.jsx)(M.Fragment,{children:o&&(0,M.jsx)(O.Z,(0,c.Z)((0,c.Z)({icon:(0,M.jsx)(s.Z,{}),type:"primary"},n),{},{title:void 0,children:n.title?n.title:F.formatMessage({id:"button.add"})}))})},J=function(n){var v=(0,D.tT)("@@initialState"),j=v.initialState,F=(0,D.YB)(),C=(0,V.$B)(),r=j.routePathCodeMap[C.path],o=j.flatMenus.hasOwnProperty("".concat(r,".").concat(n.code));return(0,M.jsx)(M.Fragment,{children:o&&(0,M.jsx)(u.Z,{title:n.title?n.title:F.formatMessage({id:"button.add",defaultMessage:"\u6DFB\u52A0"}),children:(0,M.jsx)(O.Z,(0,c.Z)((0,c.Z)({size:"middle",shape:"circle",type:"link",icon:(0,M.jsx)(a,{}),style:{border:0}},n),{},{title:void 0}))})})},Z=function(n){var v,j=(0,D.tT)("@@initialState"),F=j.initialState,C=(0,V.$B)(),r=(0,D.YB)(),o=F.routePathCodeMap[C.path],K=F.flatMenus.hasOwnProperty("".concat(o,".").concat(n.code));return(0,M.jsx)(M.Fragment,{children:K&&(0,m.createElement)(d.Z,(0,c.Z)((0,c.Z)({},n),{},{key:"delete",title:n.title,icon:(0,M.jsx)(p.Z,{style:{color:"red"}}),placement:"topLeft",onCancel:function($){return $.stopPropagation()}}),(0,M.jsx)(u.Z,{title:(v=n.buttonProps)!==null&&v!==void 0&&v.title?n.buttonProps.title:r.formatMessage({id:"button.delete",defaultMessage:"\u5220\u9664"}),children:(0,M.jsx)(O.Z,(0,c.Z)((0,c.Z)({size:"middle",shape:"circle",danger:!0,icon:(0,M.jsx)(I.Z,{}),style:{border:0},onClick:function($){return $.stopPropagation()}},n.buttonProps),{},{title:void 0}))}))})},X=function(n){var v=(0,D.tT)("@@initialState"),j=v.initialState,F=(0,D.YB)(),C=(0,V.$B)(),r=j.routePathCodeMap[C.path],o=j.flatMenus.hasOwnProperty("".concat(r,".").concat(n.code));return(0,M.jsx)(M.Fragment,{children:o&&(0,M.jsx)(u.Z,{title:n.title?n.title:F.formatMessage({id:"button.edit",defaultMessage:"\u7F16\u8F91"}),children:(0,M.jsx)(O.Z,(0,c.Z)((0,c.Z)({size:"middle",shape:"circle",type:"link",icon:n.icon?n.icon:(0,M.jsx)(t.Z,{}),style:{border:0}},n),{},{title:void 0}))})})},ee=function(n){var v=useModel("@@initialState"),j=v.initialState,F=useIntl(),C=useRouteMatch(),r=j.routePathCodeMap[C.path],o=j.flatMenus.hasOwnProperty("".concat(r,".").concat(n.code));return _jsx(_Fragment,{children:o&&_jsx(_Button,_objectSpread(_objectSpread({icon:_jsx(UploadOutlined,{}),type:"primary"},n),{},{title:void 0,children:n.title?n.title:F.formatMessage({id:"button.export",defaultMessage:"\u5BFC\u51FA"})}))})},te=function(n){var v=useModel("@@initialState"),j=v.initialState,F=useIntl(),C=useRouteMatch(),r=j.routePathCodeMap[C.path],o=j.flatMenus.hasOwnProperty("".concat(r,".").concat(n.code));return _jsx(_Fragment,{children:o&&_jsx(_Button,_objectSpread(_objectSpread({icon:_jsx(ImportOutlined,{}),type:"primary"},n),{},{title:void 0,children:n.title?n.title:F.formatMessage({id:"button.import",defaultMessage:"\u5BFC\u5165"})}))})}},2678:function(N,S,e){"use strict";e.r(S),e.d(S,{default:function(){return F}});var i=e(74921),d=e(26688),l=e(78646),u=e(93166),c=e(50962),b=e(82005),O=e(44605),m=e(63757),P=e(42273),E=e(34645),g=e(59496),f=e(85851),W=e(22326),_=e(20406),a=e(67815),s=e(57497),p=e(46324),I=e(94811),t=e(24930),D=e(31184),V=e(65845),M=e(56775),Q=e(32055),J=e(37822),Z=e(4637),X=function(r){var o=(0,g.useState)([]),K=(0,P.Z)(o,2),G=K[0],$=K[1],w=(0,g.useState)([]),H=(0,P.Z)(w,2),U=H[0],A=H[1],B=(0,g.useState)([]),R=(0,P.Z)(B,2),x=R[0],y=R[1];(0,g.useEffect)(function(){(0,Q.Zy)({status:"enabled"}).then(function(L){L.data&&($((0,J.convertTreeData)(L.data)),y(L.data.map(function(Y){return Y.id})))})},[]),(0,g.useEffect)(function(){r.value?A(r.value.map(function(L){return L.menu_id})):A([])},[r.value]);var k=function L(Y){return Y.map(function(T){return(0,Z.jsx)(M.Z.TreeNode,{selectable:!1,isLeaf:!(T.children&&T.children.length>0),title:T.title,children:T.children&&L(T.children)},T.key)})},h=function(Y){var T=[];Array.isArray(Y)?T=Y:T=Y.checked,A(T.map(function(q){return q.toString()})),r.onChange&&r.onChange(T.map(function(q){return{menu_id:q.toString()}}))};return(0,Z.jsx)("div",{style:{width:"100%",maxHeight:280,overflowY:"scroll",border:"1px solid #f0f0f0",padding:"15px 30px"},children:(0,Z.jsx)(M.Z,{checkable:!0,selectable:!1,checkedKeys:U,expandedKeys:x,onExpand:function(Y){return y(Y.map(function(T){return T.toString()}))},onCheck:h,children:k(G)})})},ee=X,te=function(r){var o=(0,f.YB)(),K=(0,g.useRef)(),G=g.useState(),$=(0,P.Z)(G,2),w=$[0],H=$[1];return(0,g.useEffect)(function(){var U;!r.visible||((U=K.current)===null||U===void 0||U.resetFields(),r.id&&(0,_.cY)(r.id).then(function(){var A=(0,b.Z)((0,l.Z)().mark(function B(R){var x,y;return(0,l.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:R.data&&(y=R.data,H(y),y.statusChecked=y.status==="enabled",(x=K.current)===null||x===void 0||x.setFieldsValue(y));case 1:case"end":return h.stop()}},B)}));return function(B){return A.apply(this,arguments)}}()))},[r]),(0,Z.jsxs)(a.Y,{visible:r.visible,title:r.title,width:650,formRef:K,layout:"horizontal",grid:!0,submitTimeout:3e3,submitter:{searchConfig:{submitText:o.formatMessage({id:"button.confirm"}),resetText:o.formatMessage({id:"button.cancel"})}},modalProps:{destroyOnClose:!0,maskClosable:!1,onCancel:function(){r.onCancel()}},onFinish:function(){var U=(0,b.Z)((0,l.Z)().mark(function A(B){var R,x,y;return(0,l.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(B.status=B.statusChecked?"enabled":"disabled",delete B.statusChecked,!(!B.menus||B.menus.length===0)){h.next=5;break}return c.ZP.warning(o.formatMessage({id:"pages.system.role.form.menu.required"})),h.abrupt("return",!1);case 5:if(!r.id){h.next=26;break}if(!(w!=null&&w.menus)){h.next=22;break}R=B.menus,x=0;case 9:if(!(x<R.length)){h.next=21;break}y=0;case 11:if(!(y<w.menus.length)){h.next=18;break}if(R[x].menu_id!==w.menus[y].menu_id){h.next=15;break}return R[x].id=w.menus[y].id,h.abrupt("break",18);case 15:y++,h.next=11;break;case 18:x++,h.next=9;break;case 21:B.menus=R;case 22:return h.next=24,(0,_.ul)(r.id,B);case 24:h.next=28;break;case 26:return h.next=28,(0,_._d)(B);case 28:return c.ZP.success(o.formatMessage({id:"component.message.success.save"})),r.onSuccess(),h.abrupt("return",!0);case 31:case"end":return h.stop()}},A)}));return function(A){return U.apply(this,arguments)}}(),initialValues:{sequence:0,statusChecked:!0},children:[(0,Z.jsxs)(s.A.Group,{title:o.formatMessage({id:"pages.system.role.form.basic"}),rowProps:{gutter:20},children:[(0,Z.jsx)(p.Z,{name:"name",label:o.formatMessage({id:"pages.system.role.form.name"}),placeholder:o.formatMessage({id:"pages.system.role.form.name.placeholder"}),rules:[{required:!0,message:o.formatMessage({id:"pages.system.role.form.name.required"})}],colProps:{span:12}}),(0,Z.jsx)(p.Z,{name:"code",label:o.formatMessage({id:"pages.system.role.form.code"}),placeholder:o.formatMessage({id:"pages.system.role.form.code.placeholder"}),rules:[{required:!0,message:o.formatMessage({id:"pages.system.role.form.code.required"})}],colProps:{span:12}}),(0,Z.jsx)(I.Z,{name:"description",label:o.formatMessage({id:"pages.system.menu.form.description"}),fieldProps:{rows:1},colProps:{span:24}}),(0,Z.jsx)(t.Z,{name:"sequence",label:o.formatMessage({id:"pages.system.role.form.sequence"}),colProps:{span:12},wrapperCol:{span:12}}),(0,Z.jsx)(D.Z,{name:"statusChecked",label:o.formatMessage({id:"pages.system.role.form.status"}),fieldProps:{checkedChildren:o.formatMessage({id:"pages.system.role.form.status.enabled"}),unCheckedChildren:o.formatMessage({id:"pages.system.role.form.status.disabled"})},colProps:{span:12}})]}),(0,Z.jsx)(s.A.Group,{title:o.formatMessage({id:"pages.system.role.form.menu"}),children:(0,Z.jsx)(s.A.Item,{name:"menus",noStyle:!0,children:(0,Z.jsx)(ee,{})})})]})},z=te,n=e(3049),v;(function(C){C[C.ADD=0]="ADD",C[C.EDIT=1]="EDIT",C[C.CANCEL=2]="CANCEL"})(v||(v={}));var j=function(){var r=(0,f.YB)(),o=(0,g.useRef)(),K=r.formatMessage({id:"pages.system.role.add"}),G=r.formatMessage({id:"pages.system.role.edit"}),$=r.formatMessage({id:"pages.system.role.delTip"}),w=(0,g.useReducer)(function(R,x){var y;switch(x.type){case v.ADD:return{visible:!0,title:K};case v.EDIT:return{visible:!0,title:G,id:(y=x.payload)===null||y===void 0?void 0:y.id};case v.CANCEL:return{visible:!1,title:"",id:void 0};default:return R}},{visible:!1,title:""}),H=(0,P.Z)(w,2),U=H[0],A=H[1],B=[{title:r.formatMessage({id:"pages.system.role.form.name"}),dataIndex:"name",ellipsis:!0,width:160,key:"name"},{title:r.formatMessage({id:"pages.system.role.form.code"}),dataIndex:"code",width:160,key:"code"},{title:r.formatMessage({id:"pages.system.role.form.sequence"}),dataIndex:"sequence",width:120,search:!1},{title:r.formatMessage({id:"pages.system.role.form.status"}),dataIndex:"status",width:130,search:!1,render:function(x,y){var k=y.status;return(0,Z.jsx)(m.Z,{color:k==="enabled"?"success":"error",children:k==="enabled"?r.formatMessage({id:"pages.system.role.form.status.enabled"}):r.formatMessage({id:"pages.system.role.form.status.disabled"})})}},{title:r.formatMessage({id:"pages.system.role.form.created_at"}),dataIndex:"created_at",valueType:"dateTime",search:!1,width:180},{title:r.formatMessage({id:"pages.system.role.form.updated_at"}),dataIndex:"updated_at",valueType:"dateTime",search:!1,width:180},{title:r.formatMessage({id:"pages.table.column.operation"}),valueType:"option",key:"option",width:130,render:function(x,y){return(0,Z.jsxs)(d.Z,{size:2,children:[(0,Z.jsx)(n.g2,{code:"edit",onClick:function(){A({type:v.EDIT,payload:y})}},"edit"),(0,Z.jsx)(n.hC,{code:"delete",title:$,onConfirm:(0,b.Z)((0,l.Z)().mark(function k(){var h,L;return(0,l.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,_.k8)(y.id);case 2:h=T.sent,h.success&&(c.ZP.success(r.formatMessage({id:"component.message.success.delete"})),(L=o.current)===null||L===void 0||L.reload());case 4:case"end":return T.stop()}},k)}))},"delete")]})}}];return(0,Z.jsxs)(E.ZP,{children:[(0,Z.jsx)(W.Z,{columns:B,actionRef:o,request:_.fp,rowKey:"id",cardBordered:!0,search:{labelWidth:"auto"},pagination:{pageSize:10,showSizeChanger:!0},options:{density:!0,fullScreen:!0,reload:!0},dateFormatter:"string",toolBarRender:function(){return[(0,Z.jsx)(n.HS,{code:"add",onClick:function(){A({type:v.ADD})}},"add")]}}),(0,Z.jsx)(z,{visible:U.visible,title:U.title,id:U.id,onCancel:function(){A({type:v.CANCEL})},onSuccess:function(){var x;A({type:v.CANCEL}),(x=o.current)===null||x===void 0||x.reload()}})]})},F=j},32055:function(N,S,e){"use strict";e.d(S,{Zy:function(){return c},bL:function(){return O},r7:function(){return P},_8:function(){return g},yo:function(){return W}});var i=e(78646),d=e(20686),l=e(82005),u=e(85851);function c(a,s){return b.apply(this,arguments)}function b(){return b=(0,l.Z)((0,i.Z)().mark(function a(s,p){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.WY)("/api/v1/menus",(0,d.Z)({method:"GET",params:(0,d.Z)({},s)},p||{})));case 1:case"end":return t.stop()}},a)})),b.apply(this,arguments)}function O(a,s){return m.apply(this,arguments)}function m(){return m=(0,l.Z)((0,i.Z)().mark(function a(s,p){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.WY)("/api/v1/menus",(0,d.Z)({method:"POST",data:s},p||{})));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function P(a,s){return E.apply(this,arguments)}function E(){return E=(0,l.Z)((0,i.Z)().mark(function a(s,p){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.WY)("/api/v1/menus/".concat(s),(0,d.Z)({method:"GET"},p||{})));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function g(a,s,p){return f.apply(this,arguments)}function f(){return f=(0,l.Z)((0,i.Z)().mark(function a(s,p,I){return(0,i.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,u.WY)("/api/v1/menus/".concat(s),(0,d.Z)({method:"PUT",data:p},I||{})));case 1:case"end":return D.stop()}},a)})),f.apply(this,arguments)}function W(a,s){return _.apply(this,arguments)}function _(){return _=(0,l.Z)((0,i.Z)().mark(function a(s,p){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.WY)("/api/v1/menus/".concat(s),(0,d.Z)({method:"DELETE"},p||{})));case 1:case"end":return t.stop()}},a)})),_.apply(this,arguments)}},20406:function(N,S,e){"use strict";e.d(S,{fp:function(){return c},_d:function(){return O},cY:function(){return P},ul:function(){return g},k8:function(){return W}});var i=e(78646),d=e(20686),l=e(82005),u=e(85851);function c(a,s){return b.apply(this,arguments)}function b(){return b=(0,l.Z)((0,i.Z)().mark(function a(s,p){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.WY)("/api/v1/roles",(0,d.Z)({method:"GET",params:(0,d.Z)({current:"1",pageSize:"10"},s)},p||{})));case 1:case"end":return t.stop()}},a)})),b.apply(this,arguments)}function O(a,s){return m.apply(this,arguments)}function m(){return m=(0,l.Z)((0,i.Z)().mark(function a(s,p){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.WY)("/api/v1/roles",(0,d.Z)({method:"POST",data:s},p||{})));case 1:case"end":return t.stop()}},a)})),m.apply(this,arguments)}function P(a,s){return E.apply(this,arguments)}function E(){return E=(0,l.Z)((0,i.Z)().mark(function a(s,p){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.WY)("/api/v1/roles/".concat(s),(0,d.Z)({method:"GET"},p||{})));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function g(a,s,p){return f.apply(this,arguments)}function f(){return f=(0,l.Z)((0,i.Z)().mark(function a(s,p,I){return(0,i.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,u.WY)("/api/v1/roles/".concat(s),(0,d.Z)({method:"PUT",data:p},I||{})));case 1:case"end":return D.stop()}},a)})),f.apply(this,arguments)}function W(a,s){return _.apply(this,arguments)}function _(){return _=(0,l.Z)((0,i.Z)().mark(function a(s,p){return(0,i.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.WY)("/api/v1/roles/".concat(s),(0,d.Z)({method:"DELETE"},p||{})));case 1:case"end":return t.stop()}},a)})),_.apply(this,arguments)}}}]);
