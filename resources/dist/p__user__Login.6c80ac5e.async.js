(self.webpackChunkgin_admin_frontend=self.webpackChunkgin_admin_frontend||[]).push([[531],{46324:function(W,F,e){"use strict";var K=e(20034),I=e(37969),b=e(59496),N=e(74369),te=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],z="text",S=function(h){var f=h.fieldProps,t=h.proFieldProps,j=(0,I.Z)(h,te);return b.createElement(N.Z,(0,K.Z)({mode:"edit",valueType:z,fieldProps:f,filedConfig:{valueType:z},proFieldProps:t},j))},p=function(h){var f=h.fieldProps,t=h.proFieldProps,j=(0,I.Z)(h,R);return b.createElement(N.Z,(0,K.Z)({mode:"edit",valueType:"password",fieldProps:f,proFieldProps:t,filedConfig:{valueType:z}},j))},y=S;y.Password=p,y.displayName="ProFormComponent",F.Z=y},91542:function(W){W.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},896:function(){},98534:function(W,F,e){"use strict";e.r(F),e.d(F,{default:function(){return Te}});var K=e(34092),I=e(65010),b=e(23258),N=e(78419),te=e(13668),R=e(77151),z=e(93166),S=e(50962),p=e(78646),y=e(20686),E=e(82005),h=e(42273),f=e(16045),t=e(59496),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ie=j,ae=e(65858),oe=function(u,P){return t.createElement(ae.Z,(0,f.Z)((0,f.Z)({},u),{},{ref:P,icon:ie}))},de=t.forwardRef(oe),ue=de,ce={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},ve=ce,fe=function(u,P){return t.createElement(ae.Z,(0,f.Z)((0,f.Z)({},u),{},{ref:P,icon:ve}))},me=t.forwardRef(fe),ge=me,he=e(51421),pe=e(20034),Oe=e(37578),Ze=e(84705),Pe=e(37969),ye=e(10543),Me=e(57497),De=e(896),xe=["logo","message","contentStyle","title","subTitle","actions","children"];function Se(m){var u=m.logo,P=m.message,M=m.contentStyle,C=m.title,d=m.subTitle,T=m.actions,G=m.children,i=(0,Pe.Z)(m,xe),$=(0,ye.YB)(),J=i.submitter===!1?!1:(0,f.Z)((0,f.Z)({searchConfig:{submitText:$.getMessage("loginForm.submitText","\u767B\u5F55")},submitButtonProps:{size:"large",style:{width:"100%"}}},i.submitter),{},{render:function(O,V){var g,s,r=V.pop();if((i==null||(g=i.submitter)===null||g===void 0?void 0:g.render)===void 0)return r;if(typeof(i==null||(s=i.submitter)===null||s===void 0?void 0:s.render)=="function"){var c,o;return i==null||(c=i.submitter)===null||c===void 0||(o=c.render)===null||o===void 0?void 0:o.call(c,O,V)}return r}}),Q=(0,t.useContext)(Ze.ZP.ConfigContext),U=Q.getPrefixCls("pro-form-login"),v=function(O){return"".concat(U,"-").concat(O)},x=(0,t.useMemo)(function(){return u?typeof u=="string"?t.createElement("img",{src:u}):u:null},[u]);return t.createElement("div",{className:v("container")},t.createElement("div",{className:v("top")},C||x?t.createElement("div",{className:v("header")},x?t.createElement("span",{className:v("logo")},x):null,C?t.createElement("span",{className:v("title")},C):null):null,d?t.createElement("div",{className:v("desc")},d):null),t.createElement("div",{className:v("main"),style:(0,f.Z)({width:328},M)},t.createElement(Me.A,(0,pe.Z)({isKeyPressSubmit:!0},i,{submitter:J}),P,G),T?t.createElement("div",{className:v("other")},T):null))}var H=e(46324),re=e(26181),Z=e(85851),B=e(38837),Ee=e(91542),L=e.n(Ee),Y=e(89822),je=e(20368),Le=e(23358),a=e(4637),Ce=function(){var u,P=(0,Z.tT)("@@initialState"),M=P.initialState,C=P.setInitialState,d=(0,Z.YB)(),T=(0,t.useRef)(),G=(0,t.useState)(""),i=(0,h.Z)(G,2),$=i[0],J=i[1],Q=(0,t.useState)(""),U=(0,h.Z)(Q,2),v=U[0],x=U[1],A=function(){(0,B.lv)().then(function(s){if(s&&s.data&&s.data.captcha_id){var r=s.data.captcha_id;J(r),x((0,B.Bu)(r))}})};(0,t.useEffect)(function(){A()},[]);var O=function(){var g=(0,E.Z)((0,p.Z)().mark(function s(){var r,c;return(0,p.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M==null||(r=M.fetchInitData)===null||r===void 0?void 0:r.call(M);case 2:if(c=n.sent,!c){n.next=6;break}return n.next=6,C(function(D){return(0,y.Z)((0,y.Z)({},D),c)});case 6:case"end":return n.stop()}},s)}));return function(){return g.apply(this,arguments)}}(),V=function(){var g=(0,E.Z)((0,p.Z)().mark(function s(r){var c,o,n,D,X,w,k,se,ne,le,q,_,ee;return(0,p.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=d.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25"}),l.prev=1,r.captcha_id=$,r.password=Y.Z.md5(r.password),l.next=6,(0,B.x4)((0,y.Z)({},r));case 6:if(n=l.sent,!n.success){l.next=19;break}return S.ZP.success(d.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F"})),Y.Z.setUsername(r.username),(D=n.data)!==null&&D!==void 0&&D.access_token&&Y.g.setToken((X=n.data)===null||X===void 0?void 0:X.access_token,(w=n.data)===null||w===void 0?void 0:w.token_type,(k=n.data)===null||k===void 0?void 0:k.expires_at),l.next=13,O();case 13:if(Z.m8){l.next=15;break}return l.abrupt("return");case 15:return se=Z.m8.location.query,ne=se,le=ne.redirect,Z.m8.push(le||"/"),l.abrupt("return");case 19:n.error&&(o=((q=n.error)===null||q===void 0?void 0:q.detail)||""),S.ZP.error(o),l.next=28;break;case 23:l.prev=23,l.t0=l.catch(1),_=l.t0,_.data.error&&(o=((ee=_.data.error)===null||ee===void 0?void 0:ee.detail)||""),S.ZP.error(o);case 28:(c=T.current)===null||c===void 0||c.resetFields(["captcha_code"]),A();case 30:case"end":return l.stop()}},s,null,[[1,23]])}));return function(r){return g.apply(this,arguments)}}();return(0,a.jsxs)("div",{className:L().container,children:[(0,a.jsx)(Z.ql,{children:(0,a.jsxs)("title",{children:[d.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55"}),"- ",re.Z.title]})}),(0,a.jsx)("div",{className:L().lang,"data-lang":!0,children:Z.pD&&(0,a.jsx)(Z.pD,{})}),(0,a.jsx)("div",{className:L().content,children:(0,a.jsxs)(Se,{formRef:T,logo:(0,a.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:(u=re.Z.title)===null||u===void 0?void 0:u.toString(),subTitle:d.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{username:"admin",password:"abc-123"},actions:null,submitter:{searchConfig:{submitText:d.formatMessage({id:"pages.login.submit",defaultMessage:"\u767B\u5F55"})}},onFinish:function(){var g=(0,E.Z)((0,p.Z)().mark(function s(r){return(0,p.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,V(r);case 2:case"end":return o.stop()}},s)}));return function(s){return g.apply(this,arguments)}}(),children:[(0,a.jsx)(H.Z,{name:"username",fieldProps:{size:"large",prefix:(0,a.jsx)(he.Z,{className:L().prefixIcon})},placeholder:d.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}),rules:[{required:!0,message:d.formatMessage({id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,a.jsx)(H.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)(ue,{className:L().prefixIcon})},placeholder:d.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801"}),rules:[{required:!0,message:d.formatMessage({id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,a.jsxs)(I.Z,{justify:"space-between",gutter:8,children:[(0,a.jsx)(R.Z,{span:17,children:(0,a.jsx)(H.Z,{fieldProps:{size:"large",prefix:(0,a.jsx)(ge,{})},placeholder:d.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),name:"captcha_code",rules:[{required:!0,message:d.formatMessage({id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}]})}),(0,a.jsx)(R.Z,{span:7,children:(0,a.jsx)(N.Z,{loading:!v,style:{height:40,width:"100%",padding:0,overflow:"hidden"},onClick:function(){x((0,B.Bu)($))},children:v&&(0,a.jsx)("img",{src:"".concat(je.M).concat(v),alt:"",style:{width:"100%",height:"100%"}})})})]})]})}),(0,a.jsx)(Le.Z,{})]})},Te=Ce}}]);
